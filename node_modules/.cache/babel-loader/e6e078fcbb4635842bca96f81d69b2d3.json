{"remainingRequest":"/home/vevanta/Рабочий стол/building_widtgets/node_modules/babel-loader/lib/index.js!/home/vevanta/Рабочий стол/building_widtgets/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vevanta/Рабочий стол/building_widtgets/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/vevanta/Рабочий стол/building_widtgets/src/components/media/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/vevanta/Рабочий стол/building_widtgets/src/components/media/index.vue","mtime":1639129270940},{"path":"/home/vevanta/Рабочий стол/building_widtgets/babel.config.js","mtime":1635146657000},{"path":"/home/vevanta/Рабочий стол/building_widtgets/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vevanta/Рабочий стол/building_widtgets/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vevanta/Рабочий стол/building_widtgets/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vevanta/Рабочий стол/building_widtgets/node_modules/vue-loader-v16/dist/index.js","mtime":1632349277000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgVUlraXQgZnJvbSAndWlraXQnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IFsnc2VsZWN0SW1nJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXR1c0ZpbGVzOiAxLAogICAgICBmaWxlc1ByZWxvYWQ6IFtdLAogICAgICAvLyDQpNCw0LnQu9GLINC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPIHByZXZpZXcKICAgICAgZmlsZUxpc3Q6IFtdLAogICAgICBmaWxlczogW10sCiAgICAgIGZpbHRlcjogewogICAgICAgIHBhZ2U6IDEKICAgICAgfSwKICAgICAgYWN0aXZlSW1nSW5kZXg6IG51bGwsCiAgICAgIHN0YXR1c0ltYWdlczogMCwKICAgICAgaW1hZ2VzOiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgYXJyMSA9IFsna2V5MScsICdrZXkyJywgJ2tleTMnXTsKICAgIGRlbGV0ZSBhcnIxWzFdOwogICAgdGhpcy5nZXRJbWFnZXMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNob3dGaWxlczogZnVuY3Rpb24gc2hvd0ZpbGVzKGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuZmlsZUxpc3QgPSBlLnRhcmdldC5maWxlczsKICAgICAgQXJyYXkuZnJvbShlLnRhcmdldC5maWxlcykuZm9yRWFjaChmdW5jdGlvbiAoZmlsZSwgaW5kZXgpIHsKICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCiAgICAgICAgX3RoaXMuZmlsZXNQcmVsb2FkLnB1c2goewogICAgICAgICAgaW5kZXg6IGluZGV4LAogICAgICAgICAgYmxvYjogVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKSwKICAgICAgICAgIHN0YXR1c0xvYWQ6IDEKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZGVsRmlsZTogZnVuY3Rpb24gZGVsRmlsZShpbmRleCkgewogICAgICB0aGlzLmZpbGVzUHJlbG9hZC5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIHNhdmVGaWxlczogZnVuY3Rpb24gc2F2ZUZpbGVzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuZmlsZXNQcmVsb2FkLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHsKICAgICAgICBfdGhpczIuZmlsZXNQcmVsb2FkW2ldLnN0YXR1c0xvYWQgPSAyOwogICAgICAgIHZhciBmaWxlX2RhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBmaWxlX2RhdGEuYXBwZW5kKCdwaG90bycsIF90aGlzMi5maWxlTGlzdFtpXSk7CgogICAgICAgIF90aGlzMi4kYXBpLnBvc3QoJ21lZGlhL2FkZF9pbWcnLCBmaWxlX2RhdGEsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgICBfdGhpczIuaW1hZ2VzLnVuc2hpZnQocnMuZGF0YS5pbWcpOwoKICAgICAgICAgIF90aGlzMi5maWxlc1ByZWxvYWRbaV0uc3RhdHVzTG9hZCA9IDA7IC8vICAgIHRoaXMuZmlsZXNQcmVsb2FkLnNwbGljZShpLCAxKQogICAgICAgICAgLy8gICAgICB0aGlzLmZpbGVMaXN0LnNwbGljZShpLCAxKQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRJbWFnZXM6IGZ1bmN0aW9uIGdldEltYWdlcygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnN0YXR1c0ltYWdlcyA9IDA7CiAgICAgIHRoaXMuJGFwaS5wb3N0KCcvbWVkaWEvZmlsdGVyJywgewogICAgICAgIGZpbHRlcjogdGhpcy5maWx0ZXIKICAgICAgfSkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICBpZiAocnMuZGF0YS5kYXRhLmxlbmd0aCkgewogICAgICAgICAgX3RoaXMzLnN0YXR1c0ltYWdlcyA9IDE7CiAgICAgICAgICBycy5kYXRhLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaSkgewogICAgICAgICAgICBfdGhpczMuaW1hZ2VzLnB1c2goaXRlbSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMzLnN0YXR1c0ltYWdlcyA9IDI7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzaG93TW9yZUltZzogZnVuY3Rpb24gc2hvd01vcmVJbWcoaW5kZXhJbWcpIHsKICAgICAgdGhpcy5hY3RpdmVJbWdJbmRleCA9IGluZGV4SW1nOwogICAgICBVSWtpdC5tb2RhbCh0aGlzLiRyZWZzLm1vZGFsTW9yZUluZm9JbWcsIHsKICAgICAgICBzdGFjazogdHJ1ZQogICAgICB9KS5zaG93KCk7CiAgICB9LAogICAgc2VsZWN0SW1hZ2U6IGZ1bmN0aW9uIHNlbGVjdEltYWdlKCkgewogICAgICB0aGlzLiRlbWl0KCdzZWxlY3RJbWcnLCB0aGlzLmltYWdlc1t0aGlzLmFjdGl2ZUltZ0luZGV4XS5maXJzdCk7CiAgICAgIFVJa2l0Lm1vZGFsKHRoaXMuJHJlZnMubW9kYWxNb3JlSW5mb0ltZywgewogICAgICAgIHN0YWNrOiB0cnVlCiAgICAgIH0pLmhpZGUoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/vevanta/Рабочий стол/building_widtgets/src/components/media/index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"\">\n    <div class=\"uk-height-1-1 uk-text-center\">\n      <div class=\"fs18\">Загрузите необходимые изображения</div>\n      <form class=\"uk-margin-top uk-form-custom uk-drag uk-width-small uk-padding uk-background-muted uk-text-center\" ref=\"files\">\n        <span class=\"material-icons\">save_alt</span>\n        <input name=\"file[]\" type=\"file\" multiple @change=\"showFiles\" accept=\".jpg, .jpeg, .png\">\n      </form>\n\n      <div v-if=\"filesPreload.length\" class=\"uk-margin\">\n        <div class=\"uk-text-left\">\n          Выбрано ({{ filesPreload.length }})\n        </div>\n\n        <div class=\"uk-grid uk-grid-small uk-margin\">\n          <template v-for=\"(file, i) in filesPreload\">\n            <div class=\"uk-margin-bottom\"  :key=\"i\" v-if=\"file.statusLoad\">\n              <div class=\"uk-position-relative uk-background-muted uk-border-rounded\">\n                <div class=\"uk-position-absolute uk-height-1-1 uk-width-1-1 uk-border-rounded\" style=\"background: rgb(255 255 255 / 62%);\" :class=\"{'z-index-10': file.statusLoad === 2}\">\n                  <img class=\"uk-position-center\" src=\"/images/icons/preload2.svg\" alt=\"\">\n                </div>\n                <div\n                  class=\"op0-show uk-position-relative uk-width-small uk-height-small uk-border-rounded uk-background-center-center uk-background-cover\"\n                 :style=\"`background-image: url(${file.blob})`\">\n\n                 <div class=\"cr-pointer op0 uk-border-rounded bg-shadow uk-position-absolute uk-height-1-1 uk-width-1-1\">\n                   <span class=\"cl-wh material-icons uk-position-center\" @click=\"delFile(i)\">delete</span>\n                 </div>\n                </div>\n              </div>\n            </div>\n          </template>\n        </div>\n\n\n        <div class=\"btn bg-yellow brd36 fnt-med cl-wh\" @click=\"saveFiles\">\n          <div class=\"uk-grid uk-grid-small uk-flex-middle\">\n            <div class=\"uk-flex\">\n              <span class=\"material-icons\">update\n              </span>\n            </div>\n            <div>\n              <span>Загрузить</span>\n            </div>\n          </div>\n        </div>\n\n      </div>\n\n      <div class=\"uk-margin uk-text-left\">\n        <div>Ваши изображения</div>\n      </div>\n\n      <div class=\"uk-grid uk-grid-small uk-margin uk-flex-center\">\n        <template v-for=\"(img, i) in images\" :key=\"i\" >\n          <div class=\"uk-margin-bottom\" @click=\"showMoreImg(i)\">\n            <div class=\"uk-position-relative uk-background-muted uk-border-rounded\">\n              <div class=\"uk-position-absolute uk-height-1-1 uk-width-1-1 uk-border-rounded\" style=\"background: rgb(255 255 255 / 62%);\">\n                <img class=\"uk-position-absolute\" src=\"/images/icons/preload2.svg\" alt=\"\">\n              </div>\n              <div\n                class=\"op0-show uk-position-relative uk-width-small uk-height-small uk-border-rounded uk-background-center-center uk-background-cover\"\n               :style=\"`background-image: url(https://cdn.vevanta.com/sk/media_libs/${img.first})`\"\n               >\n\n               <div class=\"cr-pointer op0 uk-border-rounded bg-shadow uk-position-absolute uk-height-1-1 uk-width-1-1\">\n                 <span class=\"cl-wh material-icons uk-position-center\">preview</span>\n               </div>\n              </div>\n            </div>\n          </div>\n        </template>\n      </div>\n      <div v-show=\"statusImages !== 2\">\n        <span v-show=\"statusImages === 1\" class=\"material-icons fs18 cr-pointer\" @click=\"filter.page++;getImages()\">add_circle</span>\n        <div v-show=\"statusImages === 0\">\n          <img src=\"/images/icons/preload.svg\" alt=\"\">\n        </div>\n      </div>\n    </div>\n\n    <div ref=\"modalMoreInfoImg\" uk-modal>\n      <div class=\"uk-modal-dialog uk-modal-body\" v-if=\"activeImgIndex == 0\">\n        <img :src=\"`https://cdn.vevanta.com/sk/media_libs/${images[activeImgIndex].first}`\" alt=\"\">\n      </div>\n    </div>\n\n\n    <div ref=\"modalMoreInfoImg\" class=\"uk-modal-container\" uk-modal>\n      <div class=\"uk-modal-dialog uk-modal-body\" v-if=\"typeof activeImgIndex === 'number'\">\n        <div class=\"uk-grid uk-grid-small\">\n          <div class=\"uk-width-1-2\">\n            <div class=\"uk-background-muted uk-width-1-1 uk-height-medium uk-flex uk-flex-middle uk-flex-center\" style=\"padding: 10px;\">\n              <img style=\"max-height: 100%\" :src=\"`https://cdn.vevanta.com/sk/media_libs/${images[activeImgIndex].first}`\" alt=\"\">\n            </div>\n\n          </div>\n          <div class=\"uk-width-1-2 uk-child-width-1-1\">\n            <div>\n              <span class=\"fnt-bld\">Размер файла:</span> {{images[activeImgIndex].size }}\n            </div>\n            <div>\n              <span class=\"fnt-bld\">Размеры:</span> {{ images[activeImgIndex].first_width }}x{{ images[activeImgIndex].first_height }}\n            </div>\n            <div>\n              <span class=\"fnt-bld\">Формат</span> {{images[activeImgIndex].extension }}\n            </div>\n            <div>\n              <span class=\"fnt-bld\">Имя файла</span>\n              <input class=\"uk-input\" type=\"text\" name=\"\" :value=\"images[activeImgIndex].first\">\n            </div>\n            <div>\n              <span class=\"fnt-bld\">URL</span>\n              <input class=\"uk-input\" type=\"text\" name=\"\" :value=\"`https://cdn.vevanta.com/sk/media_libs/${images[activeImgIndex].first}`\">\n            </div>\n            <div class=\"uk-flex uk-flex-middle uk-margin-top cr-pointer\" @click=\"selectImage\">\n              <span v-show=\"statusImages === 1\" class=\"material-icons fs18 uk-margin-small-right\">add_circle</span> <span>Выбрать</span>\n            </div>\n          </div>\n\n\n        </div>\n\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport UIkit from 'uikit'\n  export default {\n    props: ['selectImg'],\n    data() {\n      return {\n        statusFiles: 1,\n        filesPreload: [], // Файлы для отображения preview\n        fileList: [],\n        files: [],\n        filter: {\n          page: 1,\n        },\n        activeImgIndex: null,\n        statusImages: 0,\n        images: []\n      }\n    },\n\n    created() {\n      let arr1 = ['key1', 'key2', 'key3']\n      delete arr1[1]\n      this.getImages()\n    },\n\n    methods: {\n      showFiles(e) {\n        this.fileList = e.target.files\n\n        Array.from(e.target.files).forEach((file, index) => {\n          let reader = new FileReader();\n\n          this.filesPreload.push({\n            index,\n            blob: URL.createObjectURL(file),\n            statusLoad: 1,\n          });\n\n        });\n      },\n\n      delFile(index) {\n        this.filesPreload.splice(index, 1)\n      },\n\n      saveFiles() {\n        this.filesPreload.forEach((item, i) => {\n          this.filesPreload[i].statusLoad = 2\n\n          let file_data = new FormData()\n          file_data.append('photo', this.fileList[i])\n          this.$api.post('media/add_img', file_data, {\n            headers: {\n              'Content-type': 'multipart/form-data'\n            }\n          })\n          .then(rs => {\n            this.images.unshift(rs.data.img)\n            this.filesPreload[i].statusLoad = 0\n        //    this.filesPreload.splice(i, 1)\n      //      this.fileList.splice(i, 1)\n          })\n\n        })\n      },\n\n      getImages() {\n        this.statusImages = 0\n\n        this.$api.post('/media/filter', {\n          filter: this.filter\n        })\n        .then(rs => {\n          if (rs.data.data.length) {\n            this.statusImages = 1\n            rs.data.data.forEach((item, i) => {\n              this.images.push(item)\n            });\n          } else {\n            this.statusImages = 2\n          }\n        })\n      },\n\n      showMoreImg(indexImg) {\n        this.activeImgIndex = indexImg\n       UIkit.modal(this.$refs.modalMoreInfoImg, {\n         stack: true\n       }).show()\n     },\n\n     selectImage() {\n       this.$emit('selectImg', this.images[this.activeImgIndex].first)\n       UIkit.modal(this.$refs.modalMoreInfoImg, {\n         stack: true\n       }).hide()\n     }\n\n    }\n  }\n</script>\n"],"sourceRoot":""}]}
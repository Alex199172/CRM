{"remainingRequest":"/home/vevanta/Рабочий стол/building_widtgets/node_modules/babel-loader/lib/index.js!/home/vevanta/Рабочий стол/building_widtgets/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vevanta/Рабочий стол/building_widtgets/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/vevanta/Рабочий стол/building_widtgets/src/pages/client/crm/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/vevanta/Рабочий стол/building_widtgets/src/pages/client/crm/index.vue","mtime":1642157650079},{"path":"/home/vevanta/Рабочий стол/building_widtgets/babel.config.js","mtime":1635146657000},{"path":"/home/vevanta/Рабочий стол/building_widtgets/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vevanta/Рабочий стол/building_widtgets/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vevanta/Рабочий стол/building_widtgets/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vevanta/Рабочий стол/building_widtgets/node_modules/vue-loader-v16/dist/index.js","mtime":1632349277000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdGF0dXNTb3J0OiAwLAogICAgICBzdGF0dXNMZWFkczogMCwKICAgICAgdGFibGVzOiBbXSwKICAgICAgc29ydERvbWFpbkFjdGl2ZTogJycsCiAgICAgIHNvcnRDb21wYW55QWN0aXZlOiAnJywKICAgICAgc29ydE9yaWdpbkFjdGl2ZTogJycsCiAgICAgIGRvbWFpbnM6IFtdLAogICAgICBjb21wYW5pZXM6IFtdLAogICAgICBvcmlnaW5zOiBbXSwKICAgICAgZGF0ZV9wZXJpb2Q6IFtdLAogICAgICB0b3RhbDogMCwKICAgICAgbGFzdF86IDAsCiAgICAgIGZpcnN0X3BhZ2U6IDEsCiAgICAgIHBhZ2VzOiBbXSwKICAgICAgZmlsdGVyOiB7CiAgICAgICAgZG9tYWluOiBbXSwKICAgICAgICBjb21wYW55OiBbXSwKICAgICAgICBvcmlnaW46IFtdLAogICAgICAgIGRhdGVfcGVyaW9kOiBbXSwKICAgICAgICBwYWdlOiAxLAogICAgICAgIHNvcnQ6ICdkZXNjJwogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5kb21haW4pIHsKICAgICAgdGhpcy5maWx0ZXIuZG9tYWluID0gW3RoaXMuJHJvdXRlLnF1ZXJ5LmRvbWFpbl07CiAgICB9CgogICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LmNvbXBhbnkpIHsKICAgICAgdGhpcy5maWx0ZXIuY29tcGFueSA9IFt0aGlzLiRyb3V0ZS5xdWVyeS5jb21wYW55XTsKICAgIH0KCiAgICBpZiAodGhpcy4kcm91dGUucXVlcnkuc29ydCkgewogICAgICB0aGlzLmZpbHRlci5zb3J0ID0gdGhpcy4kcm91dGUucXVlcnkuc29ydDsKICAgIH0KCiAgICBpZiAodGhpcy4kcm91dGUucXVlcnkub3JpZ2luKSB7CiAgICAgIHRoaXMuZmlsdGVyLm9yaWdpbiA9IFt0aGlzLiRyb3V0ZS5xdWVyeS5vcmlnaW5dOwogICAgfQoKICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5wYWdlKSB7CiAgICAgIHRoaXMuZmlsdGVyLnBhZ2UgPSB0aGlzLiRyb3V0ZS5xdWVyeS5wYWdlOwogICAgfQoKICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5kYXRlX3BlcmlvZCkgewogICAgICB2YXIgZGF0ZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmRhdGVfcGVyaW9kLnNwbGl0KCcsJyk7CgogICAgICBpZiAoZGF0ZS5sZW5ndGggPT09IDIpIHsKICAgICAgICB0aGlzLmZpbHRlci5kYXRlX3BlcmlvZCA9IGRhdGU7CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLnNlYXJjaExlYWRzKCk7CgogICAgdGhpcy5fZ2V0X2RvbWFpbnMoKTsKCiAgICB0aGlzLl9nZXRfY29tcGFuaWVzKCk7CgogICAgdGhpcy5fZ2V0X29yaWdpbnMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNlYXJjaExlYWRzOiBmdW5jdGlvbiBzZWFyY2hMZWFkcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBxcyA9IE9iamVjdC5rZXlzKHRoaXMuZmlsdGVyKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KF90aGlzLmZpbHRlcltrZXldKSAmJiBfdGhpcy5maWx0ZXJba2V5XS5sZW5ndGgpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIF90aGlzLmZpbHRlcltrZXldID09PSAnc3RyaW5nJyAmJiBfdGhpcy5maWx0ZXJba2V5XSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoaXMuZmlsdGVyW2tleV0gPT09ICdudW1iZXInKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSkubWFwKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICByZXR1cm4gIiIuY29uY2F0KGtleSwgIj0iKS5jb25jYXQoX3RoaXMuZmlsdGVyW2tleV0pOwogICAgICB9KS5qb2luKCcmJyk7CiAgICAgIHZhciBzdGF0ZU9iaiA9IHsKICAgICAgICBmb286ICdjcm0nCiAgICAgIH07CiAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHN0YXRlT2JqLCAicGFnZSAyIiwgIi9DUk0vPyIuY29uY2F0KHFzKSk7CiAgICAgIHRoaXMudGFibGVzID0gW107CiAgICAgIHRoaXMuc3RhdHVzTGVhZHMgPSAwOwogICAgICB2YXIgZmlsdGVyID0gdGhpcy5maWx0ZXI7CgogICAgICBpZiAodGhpcy4kcmVmcy50YWJsZXNMZWFkcykgewogICAgICAgIHRoaXMuJHJlZnMudGFibGVzTGVhZHMuc2Nyb2xsSW50b1ZpZXcoKTsKICAgICAgfQoKICAgICAgdGhpcy4kYXBpLnBvc3QoJ2xlYWQvZ2V0X2xlYWRzJywgewogICAgICAgIGZpbHRlcjogZmlsdGVyCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgY29uc29sZS5sb2cocnMuZGF0YSk7CiAgICAgICAgX3RoaXMudGFibGVzID0gcnMuZGF0YS5kYXRhOwogICAgICAgIF90aGlzLnRvdGFsID0gcnMuZGF0YS50b3RhbDsKICAgICAgICBfdGhpcy5sYXN0X3BhZ2UgPSBycy5kYXRhLmxhc3RfcGFnZTsKICAgICAgICBfdGhpcy5maWx0ZXIucGFnZSA9IHJzLmRhdGEuY3VycmVudF9wYWdlOwogICAgICAgIF90aGlzLnN0YXR1c0xlYWRzID0gMTsKICAgICAgfSk7CiAgICB9LAogICAgX2dldF9kb21haW5zOiBmdW5jdGlvbiBfZ2V0X2RvbWFpbnMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kYXBpLnBvc3QoJ2xlYWQvZ2V0X2RvbWFpbnMnKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgIF90aGlzMi5kb21haW5zID0gcnMuZGF0YS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBfZ2V0X2NvbXBhbmllczogZnVuY3Rpb24gX2dldF9jb21wYW5pZXMoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy4kYXBpLnBvc3QoJ2xlYWQvZ2V0X2NvbXBhbmllcycpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgX3RoaXMzLmNvbXBhbmllcyA9IHJzLmRhdGEuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgX2dldF9vcmlnaW5zOiBmdW5jdGlvbiBfZ2V0X29yaWdpbnMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy4kYXBpLnBvc3QoJ2xlYWQvZ2V0X29yaWdpbnMnKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgIF90aGlzNC5vcmlnaW5zID0gcnMuZGF0YS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBzdGFydExlYWREYXRlOiBmdW5jdGlvbiBzdGFydExlYWREYXRlKCkgewogICAgICBpZiAodGhpcy5maWx0ZXIuZGF0ZV9wZXJpb2QubGVuZ3RoID09PSAyKSB7CiAgICAgICAgaWYgKHRoaXMuZmlsdGVyLmRhdGVfcGVyaW9kWzBdICYmIHRoaXMuZmlsdGVyLmRhdGVfcGVyaW9kWzFdKSB7CiAgICAgICAgICB0aGlzLmZpbHRlci5wYWdlID0gMTsKICAgICAgICAgIHRoaXMuc2VhcmNoTGVhZHMoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/vevanta/Рабочий стол/building_widtgets/src/pages/client/crm/index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n\n    <div class=\"uk-box-shadow-medium uk-background-default uk-padding-small uk-margin-top brd12\">\n      <div class=\"uk-flex uk-flex-column\">\n        <div class=\"uk-position-absolute uk-width-1-1 uk-height-1-1 preload__cont\" v-show=\"statusLeads === 0\">\n          <div class=\"uk-position-center\">\n            <img src=\"/images/icons/preload.svg\" alt=\"\">\n          </div>\n        </div>\n\n\n        <div class=\"uk-grid uk-child-width-1-4@l uk-child-width-1-3@m\">\n          <div>\n            <div class=\"uk-text-left uk-margin-top uk-margin-small-bottom fnt-bld\">\n              Домен\n            </div>\n              <div>\n                <select\n                  class=\"uk-select\"\n                  v-model=\"filter.domain\"\n                  @change=\"filter.page = 1; searchLeads()\"\n                  >\n                  <option disabled value=\"\">Домен</option>\n                  <template v-for=\"(domain, index) in domains\" :key=\"index\">\n                    <option\n                    :value=\"[domain.id_domain]\"\n                    v-if=\"(domain.id_company==filter.company[0]) || !filter.company.length\"\n                    >\n                      {{domain.site_domain}}\n                    </option>\n                  </template>\n                </select>\n              </div>\n          </div>\n          <div>\n            <div>\n              <div class=\"uk-text-left uk-margin-top uk-margin-small-bottom fnt-bld\">\n                Компании\n              </div>\n                <div>\n                  <select\n                    class=\"uk-select\"\n                    v-model=\"filter.company\"\n                    @change=\"filter.page = 1; filter.domain = []; searchLeads()\"\n                    >\n                    <option disabled value=\"\">Компании</option>\n                    <option\n                      v-for=\"(company, index) in companies\"\n                      :key=\"index\"\n                      :value=\"[company.id_company]\"\n                      >\n                      {{company.name_company}}\n                    </option>\n                  </select>\n                </div>\n            </div>\n          </div>\n          <div>\n            <div>\n              <div class=\"uk-text-left uk-margin-top uk-margin-small-bottom fnt-bld\">\n                Источник\n              </div>\n                <div>\n                  <select\n                    class=\"uk-select\"\n                    v-model=\"filter.origin\"\n                    @change=\"filter.page = 1; searchLeads()\"\n                    >\n                    <option disabled value=\"\">Источник</option>\n                    <option v-for=\"(origin, index) in origins\" :key=\"index\" :value=\"[origin.id_origin]\">\n                      {{origin.name_origin}}\n                    </option>\n                  </select>\n                </div>\n            </div>\n          </div>\n          <div>\n            <div>\n              <div class=\"uk-text-left uk-margin-top uk-margin-small-bottom fnt-bld\">\n                Дата\n              </div>\n                <div>\n                  <input\n                    class=\"uk-select\"\n                    v-model=\"filter.date_period[0]\"\n                    @change=\"startLeadDate\"\n                    type=\"date\" data-uk-datepicker=\"{format:'DD.MM.YYYY'}\">\n                </div>\n                <div>\n                  <input\n                    class=\"uk-select uk-margin-top\"\n                    v-model=\"filter.date_period[1]\"\n                    @change=\"startLeadDate\"\n                    type=\"date\" data-uk-datepicker=\"{format:'DD.MM.YYYY'}\">\n                </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"uk-box-shadow-medium uk-background-default uk-padding-small uk-margin-top brd12\" ref=\"tablesLeads\">\n      <div class=\"uk-overflow-auto\">\n        <div v-dragscroll=\"true\" style=\"width: 100%; height: 100%; overflow: auto;\">\n          <div class=\"uk-text-left fnt-bld\">\n            Общее количество заявок: {{total}}\n          </div>\n      <table class=\"uk-table uk-table-striped uk-table-hover uk-table-small uk-table-middle\">\n          <caption></caption>\n          <thead>\n              <tr>\n                <th><span\n                  class=\"material-icons cr-pointer show-animation show-animation:hover cl-vevanta\"\n                  v-if=\"filter.sort === 'desc'\"\n                  @click=\"filter.sort = 'asc'; searchLeads();\"\n                  >arrow_drop_up\n                  </span>\n                  <span\n                    class=\"material-icons cr-pointer show-animation show-animation:hover cl-vevanta\"\n                    @click=\"filter.sort = 'desc'; searchLeads();\"\n                    v-else\n                    >arrow_drop_down\n                    </span>\n                </th>\n\n                <th class=\"\">Телефон</th>\n                <th class=\"\">E-mail</th>\n                <th class=\"\">Имя</th>\n                <th class=\"\">Форма</th>\n                <th class=\"\">Доменное имя</th>\n                <th class=\"\">URL</th>\n                <th class=\"\">Дата</th>\n                <th class=\"\">_ga</th>\n                <th class=\"\">roistat_visit</th>\n                <th class=\"\">ya_client_id</th>\n                <th class=\"\">name_origin</th>\n                <th>Телефон</th>\n                <th>E-mail</th>\n                <th>Имя</th>\n                <th>Форма</th>\n                <th>Доменное имя</th>\n                <th>URL</th>\n                <th>Дата</th>\n                <th>_ga</th>\n                <th>roistat_visit</th>\n                <th>ya_client_id</th>\n                <th>name_origin</th>\n              </tr>\n          </thead>\n          <tfoot>\n            <tr>\n              <th></th>\n              <th>Телефон</th>\n              <th>E-mail</th>\n              <th>Имя</th>\n              <th>Форма</th>\n              <th>Доменное имя</th>\n              <th>URL</th>\n              <th>Дата</th>\n              <th>_ga</th>\n              <th>roistat_visit</th>\n              <th>ya_client_id</th>\n              <th>Источник</th>\n            </tr>\n          </tfoot>\n          <tbody>\n              <tr class=\"uk-width-medium uk-text-left\" v-for=\"(table, index) in tables\" :key=\"index\">\n              <td></td>\n              <td>{{ table.phone_lead }}</td>\n              <td>{{ table.email_lead }}</td>\n              <td>{{ table.name_lead }}</td>\n              <td>\n                <div style=\"width: 300px; height: 75px; overflow: hidden; text-overflow: ellipsis\">\n                  {{ table.msg_lead }}\n                </div>\n              </td>\n              <td>{{ table.site_domain }}</td>\n              <td>\n                <div style=\"width: 200px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\n                  {{ table.url_lead }}\n                </div>\n              </td>\n              <td>{{ table.first_date }}</td>\n              <td>{{ table.go_client_id }}</td>\n              <td>{{ table.roistat_visit }}</td>\n              <td>{{ table.ya_client_id }}</td>\n              <td class=\"uk-text-truncate\">{{ table.name_origin }}</td>\n              <td><span class=\"m-auto material-icons cl-red2 cr-pointer\">delete</span></td>\n              </tr>\n          </tbody>\n      </table>\n    </div>\n      </div>\n    </div>\n    <div class=\"uk-margin-top\" v-show=\"tables.length\">\n      <ul class=\"uk-grid uk-grid-small uk-flex-center\">\n          <li v-if=\"filter.page>1\">\n            <a class=\"cl-dark\" href=\"#\" @click.prevent=\"filter.page--; searchLeads()\">\n              <span class=\"material-icons\">chevron_left</span>\n            </a>\n          </li>\n          <li v-if=\"(filter.page - 3) > 1 \">\n            <a class=\"cl-dark\" href=\"#\" @click.prevent=\"filter.page -= 3; searchLeads()\">\n              {{ filter.page - 3 }}\n            </a>\n          </li>\n          <li v-if=\"(filter.page - 2) > 1 \">\n            <a class=\"cl-dark\" href=\"#\" @click.prevent=\"filter.page -= 2; searchLeads()\">\n              {{ filter.page - 2 }}\n            </a>\n          </li>\n\n          <li v-if=\"(filter.page - 1) >= 1 \">\n            <a class=\"cl-dark\" href=\"#\" @click.prevent=\"filter.page--; searchLeads()\">\n              {{ filter.page - 1 }}\n            </a>\n          </li>\n\n          <li>\n            <a class=\"cl-dark cl-vevanta\" href=\"#\" @click.prevent>\n              {{ filter.page }}\n            </a>\n          </li>\n\n          <li v-if=\"(filter.page + 1) < last_page\">\n            <a class=\"cl-dark\" href=\"#\" @click.prevent=\"filter.page++; searchLeads()\">\n              {{ filter.page + 1 }}\n            </a>\n          </li>\n          <li v-if=\"(filter.page + 2) < last_page\">\n            <a class=\"cl-dark\" href=\"#\" @click.prevent=\"filter.page += 2; searchLeads()\">\n              {{ filter.page + 2 }}\n            </a>\n          </li>\n          <template  v-if=\"filter.page < last_page\">\n            <li><span> ... </span></li>\n            <li>\n              <a class=\"cl-dark\" href=\"#\" @click.prevent=\"filter.page = last_page; searchLeads()\">\n                {{ last_page }}\n              </a>\n            </li>\n            <li>\n              <a class=\"cl-dark\" href=\"#\" @click.prevent=\"filter.page++; searchLeads()\">\n                <span class=\"material-icons\">chevron_right</span>\n              </a>\n            </li>\n          </template>\n      </ul>\n    </div>\n\n  </div>\n</template>\n\n<script>\n\n  export default {\n    data() {\n      return {\n        statusSort: 0,\n        statusLeads: 0,\n        tables : [],\n        sortDomainActive : '',\n        sortCompanyActive : '',\n        sortOriginActive : '',\n        domains : [],\n        companies : [],\n        origins : [],\n        date_period : [],\n        total: 0,\n        last_: 0,\n        first_page: 1,\n        pages: [],\n        filter: {\n          domain: [],\n          company: [],\n          origin: [],\n          date_period: [],\n          page: 1,\n          sort: 'desc'\n        }\n      }\n    },\n\n    created() {\n      if (this.$route.query.domain) {\n        this.filter.domain = [this.$route.query.domain]\n      }\n      if (this.$route.query.company) {\n          this.filter.company = [this.$route.query.company]\n      }\n\n      if (this.$route.query.sort) {\n          this.filter.sort = this.$route.query.sort\n      }\n\n      if (this.$route.query.origin) {\n        this.filter.origin = [this.$route.query.origin]\n      }\n      if (this.$route.query.page) {\n          this.filter.page = this.$route.query.page\n      }\n      if (this.$route.query.date_period) {\n          let date = this.$route.query.date_period.split(',')\n\n         if (date.length === 2) {\n            this.filter.date_period = date\n          }\n      }\n\n      this.searchLeads()\n      this._get_domains()\n      this._get_companies()\n      this._get_origins()\n  },\n\n    methods: {\n      searchLeads() {\n\n        let qs = Object.keys(this.filter).filter(key => {\n         if (Array.isArray(this.filter[key]) && this.filter[key].length) {\n           return true\n         } else if (typeof this.filter[key] === 'string' && this.filter[key]) {\n           return true\n         } else if (typeof this.filter[key] === 'number') {\n           return true\n         } else {\n           return false\n         }\n       }).map(key => `${key}=${this.filter[key]}`).join('&')\n\n\n       let stateObj = {\n         foo: 'crm'\n       }\n      history.pushState(stateObj, \"page 2\", `/CRM/?${qs}`)\n\n\n        this.tables = []\n        this.statusLeads = 0\n        let filter = this.filter\n\n        if (this.$refs.tablesLeads) {\n          this.$refs.tablesLeads.scrollIntoView()\n        }\n\n        this.$api.post('lead/get_leads',{filter})\n        .then(rs => {\n          console.log(rs.data)\n           this.tables = rs.data.data\n           this.total = rs.data.total\n           this.last_page = rs.data.last_page\n           this.filter.page = rs.data.current_page\n           this.statusLeads = 1\n\n        })\n      },\n\n\n\n\n      _get_domains() {\n        this.$api.post('lead/get_domains')\n        .then(rs => {\n           this.domains = rs.data.data\n        })\n      },\n      _get_companies() {\n        this.$api.post('lead/get_companies')\n        .then(rs => {\n           this.companies = rs.data.data\n      })\n    },\n      _get_origins() {\n        this.$api.post('lead/get_origins')\n        .then(rs => {\n           this.origins = rs.data.data\n      })\n    },\n    startLeadDate() {\n      if (this.filter.date_period.length === 2) {\n        if (this.filter.date_period[0] && this.filter.date_period[1]) {\n          this.filter.page = 1\n          this.searchLeads()\n        }\n      }\n    },\n  }\n}\n</script>\n\n\n<style>\n.preload__cont {\n  width: 100%;\n  height: 100%;\n  background: rgb(255 255 255 / 74%);\n}\n\n.preload__cont img {\n  width: 60px;\n  margin-right: 400px;\n}\n\n</style>\n"],"sourceRoot":""}]}